{
  "displayName": "Model Performance Comparison",
  "warehouse_id": "a823ad30eae0e044",
  "datasets": [],
  "pages": [
    {
      "displayName": "Model Metrics",
      "name": "model_metrics",
      "layout": [
        {
          "position": {
            "height": 3,
            "width": 6,
            "x": 0,
            "y": 0
          },
          "widget": {
            "name": "ml_metrics_table",
            "textbox_spec": null,
            "queries": [
              {
                "name": "ml_metrics",
                "query": {
                  "query": "SELECT CASE WHEN request_metadata['model_name'] LIKE '%pytorch%' THEN 'Challenger (PyTorch)' WHEN request_metadata['model_name'] LIKE '%classifier_remote_file%' THEN 'Champion (Keras)' ELSE request_metadata['model_name'] END as model_type, COUNT(*) as total_requests, SUM(CASE WHEN status_code = 200 THEN 1 ELSE 0 END) as successful_requests, SUM(CASE WHEN status_code != 200 THEN 1 ELSE 0 END) as failed_requests, ROUND(AVG(execution_time_ms), 2) as avg_response_time_ms, ROUND(SUM(CASE WHEN status_code = 200 THEN 1 ELSE 0 END) * 100.0 / COUNT(*), 2) as success_rate_pct FROM healthcare_catalog_dev.gold.pneumonia_classifier_payload WHERE request_metadata IS NOT NULL GROUP BY CASE WHEN request_metadata['model_name'] LIKE '%pytorch%' THEN 'Challenger (PyTorch)' WHEN request_metadata['model_name'] LIKE '%classifier_remote_file%' THEN 'Champion (Keras)' ELSE request_metadata['model_name'] END ORDER BY success_rate_pct DESC"
                }
              }
            ],
            "spec": {
              "version": 1,
              "widgetType": "table"
            }
          }
        },
        {
          "position": {
            "height": 3,
            "width": 6,
            "x": 6,
            "y": 0
          },
          "widget": {
            "name": "confusion_matrix",
            "queries": [
              {
                "name": "confusion",
                "query": {
                  "query": "SELECT f.feedback_type, COUNT(*) as count FROM healthcare_catalog_dev.gold.prediction_feedback f GROUP BY f.feedback_type ORDER BY CASE f.feedback_type WHEN 'true-positive' THEN 1 WHEN 'false-positive' THEN 2 WHEN 'false-negative' THEN 3 WHEN 'true-negative' THEN 4 ELSE 5 END"
                }
              }
            ],
            "spec": {
              "version": 3,
              "widgetType": "bar",
              "encodings": {
                "x": {
                  "fieldName": "feedback_type",
                  "displayName": "Feedback Type"
                },
                "y": {
                  "fieldName": "count",
                  "displayName": "Count"
                }
              }
            }
          }
        },
        {
          "position": {
            "height": 3,
            "width": 12,
            "x": 0,
            "y": 3
          },
          "widget": {
            "name": "performance_trends",
            "queries": [
              {
                "name": "trends",
                "query": {
                  "query": "SELECT DATE_TRUNC('day', f.timestamp) as date, ROUND((SUM(CASE WHEN f.feedback_type IN ('true-positive', 'true-negative') THEN 1 ELSE 0 END)) * 100.0 / COUNT(*), 2) as accuracy_pct FROM healthcare_catalog_dev.gold.prediction_feedback f GROUP BY DATE_TRUNC('day', f.timestamp) ORDER BY date DESC"
                }
              }
            ],
            "spec": {
              "version": 3,
              "widgetType": "line",
              "encodings": {
                "x": {
                  "fieldName": "date",
                  "displayName": "Date"
                },
                "y": {
                  "fieldName": "accuracy_pct",
                  "displayName": "Accuracy %"
                }
              }
            }
          }
        }
      ]
    }
  ]
}
